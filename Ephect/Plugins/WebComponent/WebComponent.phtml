<?php

namespace Ephect\Plugins\WebComponent;

use Ephect\Framework\Components\WebComponent;
use Ephect\Framework\Core\Builder;
use Ephect\Framework\IO\Utils;

use function Ephect\Hooks\useEffect;

function WebComponent($children)
{

    useEffect(function($children, /* string */ $tag, /* string */ $args, $service) {

        $service = new WebComponentService($children);
        [$tag, $args] = $service->prepareFiles();

    });

    return (<<< HTML
        <{{ tag }} {{ args }} />
        {? 
            if(!{service}->isPending()) {
                {service}->markAsPending(); 
                {@html} = { children };
                {service}->storeHTML({@html});
            }
        ?}
    HTML);
}
